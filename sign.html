<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>MetaMask Signature Request</title>
</head>
<body>
   <h1>MetaMask Signature Request Example</h1>
   <button id="connectWallet">Connect Wallet</button>
   <button id="signMessage" style="display:none;">Sign Message</button>
   <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
   <script>
      document.addEventListener("DOMContentLoaded", async () => {
          const connectButton = document.getElementById("connectWallet");
          const signButton = document.getElementById("signMessage");

          // Check if MetaMask is installed
          if (typeof window.ethereum !== "undefined") {
              const web3 = new Web3(window.ethereum);

              try {
                  // Request permission to access the user's MetaMask account
                  await window.ethereum.enable();

                  // Update the UI to show the sign button
                  connectButton.style.display = "none";
                  signButton.style.display = "block";

                  // Handle sign message button click
                  signButton.addEventListener("click", async () => {
                      try {
                          // Prompt the user to sign a message
                          const accounts = await web3.eth.getAccounts();
                          const message = "This is a test message.";
                          const signature = await web3.eth.personal.sign(message, accounts[0]);
                          console.log("Signature:", signature);
                      } catch (error) {
                          console.error(error);
                      }
                  });
              } catch (error) {
                  console.error(error);
              }
          } else {
              console.log("MetaMask not installed.");
          }
      });
   </script>
</body>
</html>
